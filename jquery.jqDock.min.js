!function(a,b){if(!a.jqDock){var c=1,d=["Top","Right","Bottom","Left"],e=["Major","Minor"],f=[],g=a.map(["ed","Item","Mouse","Label","Filter","Expand","Wrap","List",""],function(a,b){return f[b]="jqDock"+a,"."+f[b]}),h=["JQDOCK","JQDOCK_conv","JQDOCK_li","JQDOCK_list"],i=["mouseenter","mousemove","mouseleave"],j=["docknudge","dockidle","dockfreeze"],k=["Idler","Inactive","Indock","Overdock","Offdock"],l={v:{wh:"height",xy:1,tl:"top",lead:0,trail:2,inv:"h"},h:{wh:"width",xy:0,tl:"left",lead:3,trail:1,inv:"v"}},m=[0,0],n=b.setTimeout,o=function(a){return a.data(h[0])},p=function(){return!1},q=function(b){return a(b).parent().children(g[1]).index(b)},r=function(a,b,c,d){var e={},f=l[c.inv].wh,g=!d||a[c.wh]>b;return e[c.wh]=g?b:a[c.wh],e[f]=g?Math.round(b*a[f]/a[c.wh]):a[f],e},s=function(b,c){return a(b).closest(g[c||0])},t=function(a){var b,c,d={};for(b in a)c=b.match(/^jqdock([A-Z])([a-zA-Z]+)$/),c&&(d[c[1].toLowerCase()+c[2]]=a[b]);return d},u=function(a){var b=parseInt(a,10);return isNaN(b)?0:b},v=function(a,c){for(var d=k[c]?c+1:k.length;d>c&&d--;)a[k[d]]&&(b.clearTimeout(a[k[d]]),a[k[d]]=null)},w=function(){var b,c=a(this),d=c.attr("id")||"",e=c.data(h[1]),g=c.children("li").map(function(){var b=a("img",this).eq(0),c=b.parent("a");return c.length?b.siblings().length?null:c[0]:b.get(0)}),i=d?{id:d}:{};return c.length&&g.length?e?e:(b=c.attr("style"),b&&(i.style=b),b=a("<div/>").addClass(f[7]).data("jqdock",a.extend({},c.data("jqdock"),t(c.data()))).data(h[3],{el:this,attr:i}),c.hide().removeAttr("id"),g.each(function(){a(this).data(h[2],a("<span/>").insertBefore(this)[0]).appendTo(b)}),b.attr("id",d).insertBefore(c),c.data(h[1],b[0]),b[0]):this},x=function(b){var c=a.now(),d=b?b.Stamp+b.Opts.duration:0;return d>c&&(c-=d-c),c},y=function(b){var c,d,e=b.data,f=o(a(e.menu));f&&(c=f.Elem[e.idx],d=f.Opts,d.sizeMax?a.extend(c,r(this,d.sizeMax,l[l[d.vh].inv]),d.capSizing):(c.width=this.width,c.height=this.height),--f.Load||n(function(){a.jqdock.init(e.menu)},0))},z=function(a,b,c){b.Item.toggleClass(f[5],!c),a.Menu.trigger("dockitem",[b.Img[0],!c])},A=function(){a(this).prev("img").triggerHandler("click")},B=function(a,b){var c=a.Elem[a.Current];c&&a.Opts.labels&&!a.Opts.permanentLabels&&c.Label.el.toggle(!!b)},C=function(a){var b,c,d,e,f=l[a.Opts.vh],g=-1,h=m[f.xy]-a.Elem[0].Item.offset()[f.tl];if(h>=0)for(b=0;0>g&&b<a.ElCt;b++)c=a.Elem[b],d=c.Pad[f.lead]+c.Pad[f.trail],e=c.Major+d,e>h?(b!==a.Current&&(B(a),a.Current=b),g=c.Offset+h*(c.Initial+d)/e):h-=e;return g},D=function(a){for(var b,c=a.childNodes.length;c;)b=a.childNodes[--c],(b.childNodes||[]).length?D(b):3===b.nodeType&&a.removeChild(b)},E=function(a){a.css({visibility:"visible"}).show()},F=function(a){var b=a.Opts.idle;b&&(v(a,0),a[k[0]]=n(function(){a.Menu.trigger(j[1])},b))},G=function(a,b){var c,d,e,f,g=a.Opts,h=l[g.vh].wh,i=a.ElCt;for(b=b||0===b?b:C(a);i--;)c=a.Elem[i],e=c.Initial,b>=0&&(d=Math.abs(b-c.Centre),d<g.distance&&(e=c[h]-Math.round((c[h]-c.Initial)*Math.pow(d,g.coefficient)/g.attenuation)),i===a.Current&&(g.noAntiFlutter||(f=[m[l[g.vh].xy],a.Current,e].join(","),f===a.ToFro[0]&&e!==a.ToFro[2]?e=a.ToFro[2]:a.ToFro=[a.ToFro[1],f,e]))),c.Final=e},H=function(a,b,c){return a},I=function(b,c,f,g){var h,i,j,k,m,n,o,p,q=b.Elem[c],s=b.Opts,t=b.Yard,v=b.Border,w=l[s.vh],x=l[w.inv],y=s.labels,A=b.Elem[b.Current],C=q.src!==q.altsrc;if(g||q.Major!==f){if(h=a.boxModel||"v"===s.vh?0:v[w.lead]+v[w.trail],g||q.Major!==q.Initial||(C&&(q.Img[0].src=q.altsrc),z(b,q)),b.Spread+=f-q.Major,i=r(q,f,w),j=s.size-i[x.wh],m={middle:1,center:1,top:2,left:2}[s.align]||0,m>1?i["margin"+d[x.trail]]=j:m?(k=Math.round(j*(100-s.bias)/100),i["margin"+d[x.lead]]=j-k,i["margin"+d[x.trail]]=k):i["margin"+d[x.lead]]=j,(f!==q.Major||g&&!c)&&(s.flow&&t.parent()[w.wh](b.Spread+v[w.lead]+v[w.trail]),t[w.wh](b.Spread+h)),q.Wrap.css(i),s.flow||t.css(w.tl,Math.floor(Math.max(0,(b[w.wh]-b.Spread)/2))),b.OnDock){if(A&&y){if(o=A.Label,p=o.el,o.mc){o.mc=0;for(m in l){o[m]=p[l[m].wh]();for(n in{lead:1,trail:1})o[m]+=u(p.css("padding"+d[l[m][n]]))}}"m"===y.charAt(0)&&p.css({top:Math.floor((A[e[x.xy]]-o.v)/2)}),"c"===y.charAt(1)&&p.css({left:Math.floor((A[e[w.xy]]-o.h)/2)})}b.Stamp||B(b,1)}q.Major=f,q.Minor=i[x.wh],g||f!==q.Initial||(C&&(q.Img[0].src=q.src),z(b,q,1)),i=null}},J=function(a){var b,c,d,e,f=a.Opts,g=l[f.vh],h=f.duration+f.step;if(a.Stamp&&(h=x()-a.Stamp,h>=f.duration&&(a.Stamp=0)),h>=f.step){for(e=(f.duration-h)/f.step,b=0;b<a.ElCt;b++)c=a.Elem[b],d=c.Final-c.Major,d=d&&e>1?c.Major+Math[0>d?"floor":"ceil"](d/e):c.Final,I(a,b,d);a.Spread>a[g.wh]&&(a.Yard.parent()[g.wh](a.Spread+a.Border[g.lead]+a.Border[g.trail]),a[g.wh]=a.Spread)}},K=function(a,b){var c=a.Elem,d=c.length;if(v(a,2),a.OnDock&&!a.Stamp){for(G(a,b);d&&c[d-1].Major===c[d-1].Final;)--d;d?(J(a),a[k[2]]=n(function(){K(a,b)},a.Opts.step)):B(a,1)}},L=function(a,b){var c=a.Elem,d=c.length;if(!a.OnDock){for(;d&&c[d-1].Major<=c[d-1].Initial;)--d;if(C(a),d)J(a),a[k[4]]=n(function(){L(a,b)},a.Opts.step);else{for(a.Stamp=0,d=c.length;d--;)c[d].Major=c[d].Final=c[d].Initial;a.Current=-1,b||F(a)}}},M=function(a,b){var c=a.Elem,d=c.length;if(a.OnDock){for(G(a,b);d&&c[d-1].Major===c[d-1].Final;)--d;d&&a.Stamp?(J(a),a[k[3]]=n(function(){M(a,b)},a.Opts.step)):(a.Stamp=0,K(a,b))}},N=function(a,b,c,d){var e=b.Elem,f=e.length;if(0===a&&(b.OnDock=1,b.Current>=0&&b.Current!==c&&B(b),b.Current=c,b.Stamp=d&&d>1?0:x(b),M(b,d?e[c].Centre:null)),1===a&&(c!==b.Current&&(B(b),b.Current=c),K(b)),2===a){for(v(b,1),b.OnDock=0,B(b),b.Stamp=x(b);f--;)e[f].Final=e[f].Initial;L(b,!!d)}},O=function(a){var b,c=o(s(this)),d=q(this),e=-1;c&&(c.Asleep?c.Opts.noBuffer||(c.Doze={El:this,type:a.type,pageX:a.pageX,pageY:a.pageY}):(b=c.OnDock,v(c,0),m=[a.pageX,a.pageY],a.type===i[2]?b?e=2:F(c):(c.Opts.inactivity&&(v(c,1),c[k[1]]=n(function(){N(2,c,d,1)},c.Opts.inactivity)),a.type===i[1]?0>d?b&&c.Current>=0&&(e=2):e=!b||c.Current<0?0:1:d>=0&&!b&&(e=0)),c.Doze=null,e>=0&&N(e,c,d)))},P=function(b){var c,d,e=a(this),f=o(e),g=b.type===j[2],h=g?"freeze":"sleep";f&&(b.type===j[0]?(h=f.Frozen?"thaw":"wake",f.Asleep&&(f.Asleep=f.Opts.onWake.call(this,h)===!1,f.Asleep||(f.Frozen=!e.trigger("dockwake",[h]))),f.Asleep||(F(f),d=f.Doze,d&&O.call(d.El,d))):(v(f,0),c=!f.Asleep||g&&!f.Frozen,c&&f.Opts.onSleep.call(this,h)===!1||(f.Asleep=!v(f,g?-1:1),f.Frozen=f.Frozen||g,c&&e.trigger("docksleep",[h]),g?f.Stamp=f.OnDock=0:N(2,f,0,1))))};a.jqdock=a.jqDock=function(){return{version:"2.0.2",defaults:{size:48,sizeMax:0,capSizing:0,distance:72,coefficient:1.5,duration:300,align:"bottom",labels:0,source:0,loader:0,inactivity:0,fadeIn:0,fadeLayer:"",step:50,setLabel:0,flow:0,idle:0,onReady:0,onSleep:0,onWake:0,noBuffer:0,active:-1,bias:50,noAntiFlutter:0,permanentLabels:0},nextId:0,useJqLoader:!a.browser||a.browser.opera||a.browser.safari,init:function(b){var c,e,h,k,m,n,p,q,t,v,w,x,y=a(b),z=o(y),B=z.Opts,C=l[B.vh],H=l[C.inv],J=z.Border,K=B.fadeLayer,L=B.labels,M=z.ElCt,Q=a("<div/>").css({position:"relative",padding:0}),R=Q.clone().css({margin:0,border:"0 none",backgroundColor:"transparent"}),S=0,T=0;for(D(b),y.children().each(function(b,c){var d=z.Elem[b].Wrap=a(c).wrap(R.clone().append(R.clone())).parent();"h"===B.vh&&d.parent().css("float","left"),a("*",d).css({position:"relative",padding:0,margin:0,borderWidth:0,borderStyle:"none",verticalAlign:"top",display:"block",width:"100%",height:"100%"})});M>T;)p=z.Elem[T++],v=p.Pad,q=r(p,B.size,H,B.capSizing),p.Major=p.Final=p.Initial=q[C.wh],p.Item=p.Wrap.css(q).parent(),p.Img.attr({alt:""}).parent("a").andSelf().removeAttr("title"),z[H.wh]=Math.max(z[H.wh],B.size+v[H.lead]+v[H.trail]),p.Offset=S,p.Centre=S+v[C.lead]+p.Initial/2,S+=p.Initial+v[C.lead]+v[C.trail];for(T=0;M>T;){p=z.Elem[T++],v=p.Pad[C.lead]+p.Pad[C.trail],z.Spread+=p.Initial+v;for(n in{Centre:1,Offset:1}){for(G(z,p[n]),t=0,m=M;m--;)t+=z.Elem[m].Final+v;t>z[C.wh]&&(z[C.wh]=t)}}for(;T;)p=z.Elem[--T],p.Final=p.Initial;for(y.wrapInner(Q.addClass(f[6]).append(R.attr({id:z.Id,"class":f[8],style:""}).css({position:"absolute",top:0,left:0,padding:0,margin:0,overflow:"visible",height:z.height,width:z.width}))),x=z.Yard=a("#"+z.Id),m=4;m--;)J[m]=u(x.css("border"+d[m]+"Width"));for(w=x.parent().width(z.width+J[1]+J[3]).height(z.height+J[0]+J[2]);M>T;)p=z.Elem[T],v=p.Item.css("padding",p.Pad.join("px ")+"px"),I(z,T,p.Final,!0),v.addClass(f[1]).add(p.Img).addClass(f[2]+T),c=p.Label,c.el=a("<div/>").css({position:"absolute",margin:0}).addClass(f[3]+" "+f[3]+p.Link).insertAfter(p.Img).hide().on("click",A),L&&(e="b"===L.charAt(0),h="r"===L.charAt(1),c.el.css({top:e?"auto":0,left:h?"auto":0,bottom:e?0:"auto",right:h?0:"auto"})),k=B.setLabel.call(b,p.Title,T,c.el[0]),k!==!1&&a("<div/>").addClass(f[3]+"Text").html(k.toString()).appendTo(c.el),L&&B.permanentLabels&&c.el.show(),++T;p=y.on(j.join(" "),P),x.on(i.join(" "),g[1],O).find("*").css({filter:"inherit"}),z.Elem[B.active]&&N(0,z,B.active,2),z.Asleep=B.onReady.call(b,"ready")===!1,z.Asleep||(K?("menu"!==K&&(p="dock"===K?x:w),z.Asleep=!!a(g[8]+","+g[6],p).addClass(f[4]).css({filter:"inherit"}),p.css({opacity:0}),E(y),p.animate({opacity:1},B.fadeIn,function(){var b=s(this);o(b).Asleep=!a(g[4],this).add(this).css({filter:""}).removeClass(f[4]),b.trigger("dockshow",["ready"]).trigger(j[0])})):(E(y),y.trigger("dockshow",["ready"]),F(z)))},convert:function(b){return w.call(a(b).get(0))}}}(),a.fn.jqdock=a.fn.jqDock=function(b){var e,i,k=this;return"nudge"===b||"idle"===b||"freeze"===b?k.filter(g[0]).each(function(){P.call(this,{type:"dock"+b})}):"destroy"===b?k=k.map(function(){var b,c,d,e,i=a(this).filter(g[0]),k=o(i.removeClass(f[0])),l=a.extend({},i.data(h[3]));if(i.length&&k){for(i.removeData(h[0]),v(k,-1),i.off(j.join(" "),P),b=0;b<k.ElCt;b++){d=k.Elem[b],(d.Label.el||a()).remove(),e=d.Img,e.attr(d.Orig.i).removeClass(f[2]+b),d.Orig.i.style||e.removeAttr("style"),"Link"===d.Link&&(e=e.parent(),e.attr(d.Orig.a),d.Orig.a.style||e.removeAttr("style")),l.el?a(e.data(h[2])).after(e).remove():i.append(e),e=d.Label.el=d.Orig.i=d.Orig.a=null;for(c in d)d[c]=null;d=null}a(g[6],i).empty().remove(),c=k.Style,l.el?(i.empty().remove(),d=a(l.el).removeData(h[1]).attr(l.attr),l.attr.style||d.removeAttr("style")):c?i.attr("style",c):i.removeAttr("style");for(b in k)k[b]=null;k=d=null}return l.el||this}):"active"===b||"expand"===b?k.each(function(){var a=s(this,1),c=s(a),d=o(c);d&&(v(d,-1),d.Frozen||(d.Frozen=d.Asleep=!!c.trigger("docksleep",["freeze"])),N(0,d,q(a),"active"===b?2:1))}):"get"===b?(k=k.eq(0),e=k.is("img"),i=o(e?s(k):k),k=(i&&e?i.Elem[q(s(k,1))]:i)||null):k.length&&!k.not("img").length?k.each(function(c,d){var e,f,g,h=o(s(d)),i=h?h.Elem[q(s(d,1))]:0,j=0;if(b=b||{},i){e=i.Major===i.Initial;for(g in{src:1,altsrc:1})b[g]&&(f=(a.isFunction(b[g])?b[g].call(d,i[g],g):b[g]).toString(),i[g]!==f&&(i[g]=f,j=("src"===g?e:!e)?g:j));j&&a(d).attr("src",i[j])}}):k=k.map(w).filter(function(){var b=a(this).children();return!s(this).length&&b.length&&!b.not("img").filter(function(){return 1!==a(this).children("img").parent("a").children().length}).length}).each(function(){var e,g,i=a(this).addClass(f[0]),j=a("img",i),k={Menu:i,Id:f[8]+a.jqdock.nextId++,Elem:[],OnDock:0,Stamp:0,width:0,height:0,Spread:0,Border:[],Opts:a.extend({},a.jqdock.defaults,i.data("jqdock"),t(i.data()),b||{}),Current:-1,Load:j.length,ElCt:j.length,ToFro:["","",0],Style:i.attr("style")},l=k.Opts;for(g in{size:1,distance:1,duration:1,inactivity:1,fadeIn:1,step:1,idle:1,active:1,sizeMax:1})l[g]=u(l[g]);g=c*l.coefficient,l.coefficient=isNaN(g)?1.5:g,e={middle:1,center:2}[l.align],e&&(g=u(l.bias),1>g&&(l.align=2>e?"top":"left"),g>99&&(l.align=2>e?"bottom":"right"),l.bias=g),l.labels&&!/^[tmb][lcr]$/.test(l.labels.toString())&&(l.labels={top:"br",left:"tr"}[l.align]||"tl"),l.setLabel||(l.setLabel=H),l.fadeLayer=l.fadeIn?{dock:1,wrap:1}[l.fadeLayer]?l.fadeLayer:"menu":"";for(g in{onSleep:1,onWake:1,onReady:1})l[g]||(l[g]=l[g]===!1?p:a.noop);e=/^m|c$/.test(l.labels),l.attenuation=Math.pow(l.distance,l.coefficient),l.vh={left:1,center:1,right:1}[l.align]?"v":"h",i.data(h[0],k),j.each(function(b,c){var f,g,h,j=a(c),m=j.parent("a"),n=m.attr("title")||"",o={};for(f in{src:1,alt:1,title:1,style:1})o[f]=j.attr(f)||"";for(h=(l.source?l.source.call(c,b):"")||j.data("jqdockAltsrc")||""||(/\.(gif|jpg|jpeg|png)$/i.test(o.alt||"")?o.alt:"")||o.src,k.Elem[b]={Img:j,src:o.src,altsrc:h,Title:o.title||n||"",Orig:{i:a.extend({},o),a:{title:n,style:m.attr("style")||""}},Label:{mc:e},Pad:[],Link:m.length?"Link":"Image"},f=4;f--;)k.Elem[b].Pad[f]=u(j.css("padding"+d[f]));(l.loader?"jquery"===l.loader:a.jqdock.useJqLoader)?a("<img>").on("load",{idx:b,menu:i[0]},y).attr({src:h}):(g=new Image,g.onload=function(){y.call(this,{data:{idx:b,menu:i[0]}}),g.onload="",g=null},g.src=h)})}).end(),k}}a(function(){a(".jqDockAuto").jqdock()})}(jQuery,window);